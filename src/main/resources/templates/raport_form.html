<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>driMain - Raport</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <h1 class="logo"><i class="fas fa-wrench"></i> <span th:text="${raport.id} ? 'Edytuj Raport' : 'Nowy Raport'"></span></h1>
    <form th:action="@{/raport/zapisz}" method="post">
        <input type="hidden" name="id" th:value="${raport.id}" th:if="${raport.id}"/>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-sitemap"></i> Dział</label>
            <select name="dzialId" class="form-select" required>
                <option th:each="d : ${dzialy}" th:value="${d.id}" th:text="${d.nazwa}"
                        th:selected="${raport.maszyna != null && raport.maszyna.dzial != null && raport.maszyna.dzial.id == d.id}">
                </option>
            </select>
        </div>


        <div class="mb-3">
            <label class="form-label"><i class="fas fa-robot"></i> Maszyna</label>
            <select name="maszynaId" class="form-select" required>
                <option th:each="m : ${maszyny}" th:value="${m.id}" th:text="${m.nazwa} + ' (' + ${m.dzial} + ')'" th:selected="${raport.maszyna != null and raport.maszyna.id == m.id}"></option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-exclamation-triangle"></i> Typ Naprawy</label>
            <select name="typNaprawy" class="form-select" required>
                <option value="Awaria" th:selected="${raport.typNaprawy == 'Awaria'}">Awaria</option>
                <option value="Usterka" th:selected="${raport.typNaprawy == 'Usterka'}">Usterka</option>
                <option value="Przezbrojenie" th:selected="${raport.typNaprawy == 'Przezbrojenie'}">Przezbrojenie</option>
                <option value="Konserwacja" th:selected="${raport.typNaprawy == 'Konserwacja'}">Konserwacja</option>
                <option value="Regulacja" th:selected="${raport.typNaprawy == 'Regulacja'}">Regulacja</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-comment"></i> Opis Zdarzenia</label>
            <textarea name="opis" class="form-control" rows="3" required th:text="${raport.opis}"></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-user"></i> Kto Naprawił</label>
            <select name="osobaId" class="form-select" required>
                <option th:each="o : ${osoby}" th:value="${o.id}" th:text="${o.imieNazwisko}" th:selected="${raport.osoba != null and raport.osoba.id == o.id}"></option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-tasks"></i> Status</label>
            <select name="status" class="form-select" required>
                <option value="TODO" th:selected="${raport.status == 'TODO'}">TODO</option>
                <option value="Gotowe" th:selected="${raport.status == 'Gotowe'}">Gotowe</option>
                <option value="W trakcie" th:selected="${raport.status == 'W trakcie'}">W trakcie</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-calendar-alt"></i> Data Naprawy</label>
            <input type="date" name="dataNaprawy" class="form-control" required th:value="${raport.dataNaprawy}"/>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-clock"></i> Czas Od</label>
            <input type="time" name="czasOd" class="form-control" required th:value="${raport.czasOd}"/>
        </div>

        <div class="mb-3">
            <label class="form-label"><i class="fas fa-clock"></i> Czas Do</label>
            <input type="time" name="czasDo" class="form-control" required th:value="${raport.czasDo}"/>
        </div>

        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Zapisz</button>
        <a href="/" class="btn btn-secondary"><i class="fas fa-times"></i> Anuluj</a>
    </form>
</div>
</body>
</html>
